(this.webpackJsonpadmincuentas=this.webpackJsonpadmincuentas||[]).push([[0],{27:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(31),s=c.n(r),o=(c(39),c(40),c(10)),i=(c(27),c(6)),l=c(1);function d(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(i.f)();Object(a.useEffect)((function(){console.log("Entro aqui final");var e=localStorage.getItem("currentId");n(e)}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("nav",{className:"navbar navbar-dark bg-blue mb-0 pb-0 py-3 fixed",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"navbar-brand d-flex justify-content-between w-100",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("i",{className:"fas fa-calculator mr-2"}),"AdminCuentas"]}),Object(l.jsxs)("div",{className:c?"d-flexx":"d-none",onClick:function(e){return localStorage.setItem("currentId",""),n(""),void r.push("/")},children:[Object(l.jsx)("i",{className:"fas fa-sign-out text-light mr-2"}),"Salir"]})]})})}),Object(l.jsx)("div",{className:"menu"})]})}var j=c(21),u=c(4),b=c.n(u),h=c(7),m=c(11),f=c(33),O=(c(47),c(53),c(52),f.a.initializeApp({apiKey:"AIzaSyCF-z2ZrX_tkqsmkUfHhLkEYsMuYDBTtiE",authDomain:"adminhome-36c6e.firebaseapp.com",projectId:"adminhome-36c6e",storageBucket:"adminhome-36c6e.appspot.com",messagingSenderId:"450868120054",appId:"1:450868120054:web:527d8ee64f78be64105fd7",rules:{".read":"auth != null",".write":"auth != null"}})),p=(O.auth(),O.firestore());O.storage().ref();var x=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)("toralla"),s=Object(o.a)(r,2),d=s[0],j=s[1],u=Object(a.useState)(null),f=Object(o.a)(u,2),O=f[0],x=f[1],g=Object(a.useState)([]),v=Object(o.a)(g,2),N=v[0],k=v[1],w=Object(i.f)();Object(a.useEffect)((function(){localStorage.setItem("currentId",""),I()}),[]);var I=function(){var e=Object(m.a)(b.a.mark((function e(){var t,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.collection("users").get();case 2:t=e.sent,c=t.docs,a=c.map((function(e){return Object(h.a)({id:e.id},e.data())})),k(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N.forEach((function(e){c.trim()===e.user&&d.trim()===e.pass?(w.push("/home"),localStorage.setItem("currentId",""),localStorage.setItem("currentId",e.id),window.location.reload()):x("Usuario o contrase\xf1a incorrecta.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"container  mt-5 pt-3",children:Object(l.jsx)("div",{className:"row justify-content-center align-items-center mt-5",children:Object(l.jsxs)("div",{className:"col-sm-12 col-md-4 shadow p-5 bg-light rounded-lg m-4 m-sm-0",children:[Object(l.jsxs)("form",{onSubmit:function(e){return y(e)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("i",{className:"fas fa-user mr-2"}),"Usuario"]}),Object(l.jsx)("input",{onChange:function(e){return n(e.target.value)},value:c,className:"form-control",type:"text",placeholder:"Email..."})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("i",{className:"fas fa-key mr-2"}),"Contrase\xf1a"]}),Object(l.jsx)("input",{onChange:function(e){return j(e.target.value)},value:d,className:"form-control",type:"password",dplaceholder:"Contrase\xf1a..."})]}),Object(l.jsx)("button",{className:"btn btn-dark bg-blue btn-block mt-4",children:"Ingresar"})]}),null!=O?Object(l.jsx)("div",{className:"alert alert-danger mt-2",role:"alert",children:O}):Object(l.jsx)("span",{})]})})})})},g=c(20),v=c.n(g);function N(e){var t=function(){var e;return(e=new Date).getHours()+":"+e.getMinutes()},c={cantidad:"",fecha:"",hora:t(),descripcion:"",idUser2:parseInt(localStorage.getItem("currentId"))},n={cantidad:"",fecha:"",hora:t(),descripcion:"",idUser2:parseInt(localStorage.getItem("currentId"))},r=Object(a.useState)(c),s=Object(o.a)(r,2),i=s[0],d=s[1],j=Object(a.useState)(n),u=Object(o.a)(j,2),f=u[0],O=u[1],x=Object(a.useState)(""),v=Object(o.a)(x,2),N=v[0],k=v[1];Object(a.useEffect)((function(){var e=localStorage.getItem("currentId");k(e)}),[]);var w=function(){var t=Object(m.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!(i.fecha.length>0&&0!=i.cantidad.length&&i.descripcion.length>0)){t.next=6;break}return t.next=4,p.collection("ingresos-".concat(N)).add(i).then((function(t){console.log("Data ingreso",i.cantidad2),e.calculo(),y("Agregado correctamente","success",800,!1),i.cantidad2="",d(c)})).catch((function(e){return console.log(e)}));case 4:t.next=7;break;case 6:y("Agregue todos los campos correspondientes","error",1200,!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(m.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),!(f.fecha.length>0&&0!=f.cantidad&&f.descripcion.length>0)){t.next=6;break}return t.next=4,p.collection("egresos-".concat(N)).add(f).then(function(){var t=Object(m.a)(b.a.mark((function t(c){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Data ingreso",f.cantidad2),e.calculo(),y("Agregado correctamente","success",800,!1),O(n),f.cantidad2="";case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:t.next=7;break;case 6:y("Agregue todos los campos correspondientes","error",1200,!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(e,t,c,a){g({title:e,icon:t,timer:c,buttons:a})};return Object(l.jsxs)("div",{className:"w-100",children:[Object(l.jsxs)("form",{onSubmit:function(e){return I(e)},className:"w-100  bg-yellow p-2",children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col p-0",children:Object(l.jsxs)("div",{className:"form-group ml-3",children:[Object(l.jsxs)("label",{children:[Object(l.jsxs)("strong",{children:[" ",Object(l.jsx)("i",{className:"fas fa-money-bill-alt"})," Egreso:"]})," "]}),Object(l.jsx)("input",{className:"form-control",type:"number",onChange:function(e){return O(Object(h.a)(Object(h.a)({},f),{},{cantidad:Number(e.target.value)}))},value:f.cantidad})]})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[" ",Object(l.jsxs)("strong",{children:[Object(l.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})," "]}),Object(l.jsx)("input",{className:"form-control",type:"date",name:"",id:"",onChange:function(e){return O(Object(h.a)(Object(h.a)({},f),{},{fecha:e.target.value}))},value:f.fecha})]})})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(l.jsx)("input",{className:"form-control",type:"text",id:"",onChange:function(e){return O(Object(h.a)(Object(h.a)({},f),{},{descripcion:e.target.value}))},value:f.descripcion})]}),Object(l.jsxs)("button",{className:" w-100 btn bg-blue text-light d-block",onClick:function(t){e.agregarData(!1)},children:[Object(l.jsx)("i",{className:"fas fa-check mr-2"}),"  Agregar"]})]}),Object(l.jsxs)("form",{onSubmit:function(e){return w(e)},className:"w-100 bg-green mt-3 p-2 border",children:[Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col p-0",children:Object(l.jsxs)("div",{className:"form-group ml-3",children:[Object(l.jsxs)("label",{children:[Object(l.jsxs)("strong",{children:[" ",Object(l.jsx)("i",{className:"fas fa-money-bill-alt"})," Ingreso:"]})," "]}),Object(l.jsx)("input",{onChange:function(e){return d(Object(h.a)(Object(h.a)({},i),{},{cantidad:Number(e.target.value)}))},value:i.cantidad,className:"form-control",min:"0",type:"number",id:""})]})}),Object(l.jsx)("div",{className:"col",children:Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[" ",Object(l.jsxs)("strong",{children:[Object(l.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})]}),Object(l.jsx)("input",{onChange:function(e){return d(Object(h.a)(Object(h.a)({},i),{},{fecha:e.target.value}))},value:i.fecha,className:"form-control",type:"date",name:"",id:""})]})})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(l.jsx)("input",{className:"form-control",type:"text",id:"",onChange:function(e){return d(Object(h.a)(Object(h.a)({},i),{},{descripcion:e.target.value}))},value:i.descripcion})]}),Object(l.jsxs)("button",{onClick:function(t){e.agregarData(!0)},className:" w-100 btn bg-blue text-light d-block",children:[Object(l.jsx)("i",{className:"fas fa-check mr-2"})," Agregar"]})]})]})}function k(e){Object(a.useEffect)((function(){e.getDataEgresos()}),[]);var t=function(){var t=Object(m.a)(b.a.mark((function t(c){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("currentId"),console.log(c),t.next=4,p.collection("egresos-".concat(a)).doc(c).delete().then((function(t){e.getDataEgresos(),v()({title:"Eliminado correctamente",icon:"success",timer:1e3})})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("h5",{className:"text-center w-100 d-block py-1 bg-yellow text-dark",children:Object(l.jsx)("strong",{children:"Egresos"})}),Object(l.jsxs)("table",{className:"table table-hover table-striped",children:[Object(l.jsx)("thead",{className:"",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Cantidad"}),Object(l.jsx)("th",{scope:"col",children:"Descripci\xf3n"}),Object(l.jsx)("th",{scope:"col",children:"Fecha"}),Object(l.jsx)("th",{scope:"col",children:"Hora"}),Object(l.jsx)("th",{scope:"col",children:"Eliminar"})]})}),Object(l.jsx)("tbody",{children:e.listEgresos2.map((function(e,c){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"row",children:c+1}),Object(l.jsxs)("td",{children:[" Q ",e.cantidad]}),Object(l.jsx)("td",{children:e.descripcion}),Object(l.jsx)("td",{children:e.fecha}),Object(l.jsx)("td",{children:e.hora}),Object(l.jsxs)("td",{children:[Object(l.jsx)("button",{onClick:function(c){return t(e.id)},className:"btn btn-danger bg-red",children:Object(l.jsx)("i",{className:"fas fa-trash"})}),"  "]})]},c)}))})]})]})}function w(e){Object(a.useEffect)((function(){e.getDataIngresos()}),[]);var t=function(){var t=Object(m.a)(b.a.mark((function t(c){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c),a=localStorage.getItem("currentId"),t.next=4,p.collection("ingresos-".concat(a)).doc(c).delete().then((function(t){e.getDataIngresos(),v()({title:"Eliminado correctamente",icon:"success",timer:1e3})})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"",children:[Object(l.jsx)("h5",{className:"text-center w-100 d-block py-1 bg-green text-dark",children:Object(l.jsx)("strong",{children:"Ingresos"})}),Object(l.jsxs)("table",{className:"table table-hover table-striped",children:[Object(l.jsx)("thead",{className:"",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"col",children:"#"}),Object(l.jsx)("th",{scope:"col",children:"Cantidad"}),Object(l.jsx)("th",{scope:"col",children:"Descripci\xf3n"}),Object(l.jsx)("th",{scope:"col",children:"Fecha"}),Object(l.jsx)("th",{scope:"col",children:"Hora"}),Object(l.jsx)("th",{scope:"col",children:"Eliminar"})]})}),Object(l.jsx)("tbody",{children:e.listIngresos2.map((function(e,c){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{scope:"row",children:c+1}),Object(l.jsxs)("td",{children:[" Q ",e.cantidad]}),Object(l.jsx)("td",{children:e.descripcion}),Object(l.jsx)("td",{children:e.fecha}),Object(l.jsx)("td",{children:e.hora}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{onClick:function(c){return t(e.id)},className:"btn btn-danger bg-red",children:Object(l.jsx)("i",{className:"fas fa-trash"})})})]},c)}))})]})]})}function I(){Object(a.useEffect)((function(){localStorage.getItem("currentId")&&M()}),[]);var e=Object(a.useState)(!1),t=Object(o.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)([]),s=Object(o.a)(r,2),i=s[0],d=s[1],j=Object(a.useState)([]),u=Object(o.a)(j,2),f=u[0],O=u[1],x=Object(a.useState)([]),g=Object(o.a)(x,2),v=g[0],I=g[1],y=Object(a.useState)([]),S=Object(o.a)(y,2),E=S[0],C=S[1],D=Object(a.useState)(0),A=Object(o.a)(D,2),F=A[0],B=A[1],M=function(){var e=Object(m.a)(b.a.mark((function e(){var t,c,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("currentId");case 2:return t=e.sent,e.next=5,p.collection("totalCaja-".concat(t)).get();case 5:c=e.sent,a=c.docs,n=a.map((function(e){return Object(h.a)({id:e.id},e.data())})),B(n[1].total-n[0].total);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){var t=e.split("-");switch(t[1]){case"01":t[1]="Ene";break;case"02":t[1]="Feb";break;case"03":t[1]="Mar";break;case"04":t[1]="Abr";break;case"05":t[1]="May";break;case"06":t[1]="Jun";break;case"07":t[1]="Jul";break;case"08":t[1]="Ago";break;case"09":t[1]="Sep";break;case"10":t[1]="Oct";break;case"11":t[1]="Nov";break;case"12":t[1]="Dic"}return t[2]+"-"+t[1]+"-"+t[0]},H=0,J=function(){var e=Object(m.a)(b.a.mark((function e(){var t,c,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("obteniendo data Ingresos"),t=localStorage.getItem("currentId"),e.next=4,p.collection("ingresos-".concat(t)).orderBy("fecha","desc").get();case 4:return c=e.sent,a=c.docs,n=a.map((function(e){return Object(h.a)({id:e.id},e.data())})),console.log(n),n.forEach((function(e){H+=e.cantidad,e.fecha=U(e.fecha)})),e.next=11,p.collection("totalCaja-".concat(t)).doc("total_ingresos-".concat(t)).set({total:H});case 11:d(n),O(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(b.a.mark((function e(){var t,c,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Entro a obtener data egreso"),t=localStorage.getItem("currentId"),console.log("id usuario:",t),e.next=5,p.collection("egresos-".concat(t)).orderBy("fecha","desc").get();case 5:return c=e.sent,a=c.docs,n=a.map((function(e){return Object(h.a)({id:e.id},e.data())})),console.log(n),n.forEach((function(e){H+=e.cantidad,e.fecha=U(e.fecha)})),e.next=12,p.collection("totalCaja-".concat(t)).doc("total_egresos-".concat(t)).set({total:H});case 12:I(n),C(n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(e){console.log(e.target.value),"Egreso"===e.target.value?(console.log("Entre aqui"),I(E),n(!1)):"Ingreso"===e.target.value&&n(!0)},Q=function(){var e=Object(m.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return console.log(t),a=localStorage.getItem("currentId"),e.next=5,p.collection("egresos-".concat(a)).where("fecha","==","".concat(t)).get();case 5:n=e.sent,r=n.docs,s=r.map((function(e){return Object(h.a)({id:e.id},e.data())})),console.log(s),s.forEach((function(e){H+=e.cantidad,e.fecha=U(e.fecha)})),I(s),e.next=14;break;case 13:!1===c?I(E):!0===c&&I(f);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"container mt-5 pt-3",children:[Object(l.jsxs)("div",{className:"row mt-4",children:[Object(l.jsxs)("div",{className:"input-group mb-3 col-12 col-sm-6",children:[Object(l.jsx)("div",{className:"input-group-prepend",children:Object(l.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(l.jsx)("i",{className:"fas fa-search"})})}),Object(l.jsx)("input",{onChange:function(e){return Q(e.target.value)},className:"form-control",type:"date"})]}),Object(l.jsxs)("div",{className:"input-group mb-0 mb-sm-3 col-12 col-sm-6",children:[Object(l.jsx)("div",{className:"input-group-prepend",children:Object(l.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(l.jsx)("i",{className:"fas fa-search"})})}),Object(l.jsx)("input",{className:"form-control",type:"text",placeholder:"Bucar por descripcion..."})]})]}),Object(l.jsxs)("div",{className:"row mt-2",children:[Object(l.jsx)("div",{className:"col-12 col-sm-4 mb-5 mb-sm-0 order-2 order-md-1",children:Object(l.jsx)(N,{calculo:M,agregarData:function(e){e?(J(),M()):(q(),M())}})}),Object(l.jsxs)("div",{className:"col-12 col-sm-8 mt-4 mt-md-0 order-1 order-md-2",children:[Object(l.jsxs)("select",{onClick:function(e){return z(e)},onChange:function(e){return z(e)},className:"form-control bg-blue text-light",id:"FormControlSelect1",children:[Object(l.jsx)("option",{children:" Seleccione una tabla..."}),Object(l.jsx)("option",{children:"Ingreso"}),Object(l.jsx)("option",{children:"Egreso"})]}),Object(l.jsx)("div",{className:"mt-2 bg-light customTable",children:c?Object(l.jsx)(w,{getDataIngresos:J,listIngresos2:i}):Object(l.jsx)(k,{getDataEgresos:q,calculo:M,listEgresos2:v})}),Object(l.jsxs)("div",{className:"bg-light d-flex justify-content-end pr-3 mt-2 mb-5 mb-md-0 w-100 h5",children:[Object(l.jsx)("strong",{className:"pr-2",children:" Caja: "})," Q ",F,".00"]})]})]})]})}var y=function(){return Object(l.jsx)("div",{className:"fondo",children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsxs)(i.a,{path:"/home",children:[" ",Object(l.jsx)(I,{})," "]}),Object(l.jsx)(i.a,{path:"/",children:Object(l.jsx)(x,{})})]})]})})};c(50);s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.e351a2e3.chunk.js.map