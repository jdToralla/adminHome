(this.webpackJsonpadmincuentas=this.webpackJsonpadmincuentas||[]).push([[0],{30:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(31),r=c.n(s),o=(c(39),c(20)),i=c(6),l=(c(40),c(7)),d=c(5),j=c.n(d),u=c(12),b=c(11),h=c(22),f=c(32),m=(c(43),c(53),c(52),f.a.initializeApp({apiKey:"AIzaSyCF-z2ZrX_tkqsmkUfHhLkEYsMuYDBTtiE",authDomain:"adminhome-36c6e.firebaseapp.com",projectId:"adminhome-36c6e",storageBucket:"adminhome-36c6e.appspot.com",messagingSenderId:"450868120054",appId:"1:450868120054:web:527d8ee64f78be64105fd7",rules:{".read":"auth != null",".write":"auth != null"}})),x=(m.auth(),m.firestore()),p=(m.storage().ref(),c(1));function O(e){var t=Object(i.f)(),c=Object(i.g)().id,a=function(){var e;return(e=new Date).getHours()+":"+e.getUTCMinutes()+":"+e.getSeconds()},s={cantidad:"",fecha:"",hora:a(),descripcion:"",idUser:parseInt(localStorage.getItem("currentId")),tipo:2},r={cantidad:"",fecha:"",hora:a(),descripcion:"",idUser:parseInt(localStorage.getItem("currentId")),tipo:1},o=Object(n.useState)(s),d=Object(b.a)(o,2),f=d[0],m=d[1],O=Object(n.useState)(r),g=Object(b.a)(O,2),v=g[0],N=g[1];Object(n.useEffect)((function(){}),[]);var w=function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!(f.fecha.length>0&&0!==f.cantidad.length&&f.descripcion.length>0)){e.next=6;break}return e.next=4,x.collection("caja-chica").add(f).then((function(e){console.log("Data ingreso",f),k("Agregado correctamente","success",1e3,!1),t.push("/home"),m(s)})).catch((function(e){return console.log(e)}));case 4:e.next=7;break;case 6:k("Agregue todos los campos correspondientes","error",1200,!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!(v.fecha.length>0&&0!==v.cantidad&&v.descripcion.length>0)){e.next=6;break}return e.next=4,x.collection("caja-chica").add(v).then(function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Data ingreso",v.cantidad2),k("Agregado correctamente","success",1e3,!1),t.push("/home"),N(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:e.next=7;break;case 6:k("Agregue todos los campos correspondientes","error",1200,!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t,c,n){h({title:e,icon:t,timer:c,buttons:n})};return Object(p.jsxs)("div",{className:"w-100 px-3",style:{paddingTop:90},children:[Object(p.jsxs)("form",{onSubmit:function(e){return y(e)},className:"w-100 bg-yellow p-2",style:{display:"1"===c?"block":"none"},children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col p-0",children:Object(p.jsxs)("div",{className:"form-group ml-3",children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("strong",{children:[" ",Object(p.jsx)("i",{className:"fas fa-money-bill-alt"})," Egreso:"]})," "]}),Object(p.jsx)("input",{className:"form-control",type:"number",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{cantidad:Number(e.target.value)}))},value:v.cantidad})]})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsxs)("strong",{children:[Object(p.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})," "]}),Object(p.jsx)("input",{className:"form-control",type:"date",name:"",id:"",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{fecha:e.target.value}))},value:v.fecha})]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(p.jsx)("textarea",{className:"form-control",type:"text",id:"",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{descripcion:e.target.value}))},value:v.descripcion})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(p.jsxs)("button",{className:"btn bg-danger text-light",onClick:function(){return t.push("/home")},children:[Object(p.jsx)("i",{className:"fas fa-times mr-2"}),"  Cancelar"]}),Object(p.jsxs)("button",{className:"btn bg-blue text-light ml-2",onClick:function(e){y(e)},children:[Object(p.jsx)("i",{className:"fas fa-check mr-2"}),"  Agregar"]})]})]}),Object(p.jsxs)("form",{onSubmit:function(e){return w(e)},className:"w-100 bg-green p-2 border",style:{display:"2"===c?"block":"none"},children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col p-0",children:Object(p.jsxs)("div",{className:"form-group ml-3",children:[Object(p.jsxs)("label",{children:[Object(p.jsxs)("strong",{children:[" ",Object(p.jsx)("i",{className:"fas fa-money-bill-alt"})," Ingreso:"]})," "]}),Object(p.jsx)("input",{onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{cantidad:Number(e.target.value)}))},value:f.cantidad,className:"form-control",min:"0",type:"number",id:""})]})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[" ",Object(p.jsxs)("strong",{children:[Object(p.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})]}),Object(p.jsx)("input",{onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{fecha:e.target.value}))},value:f.fecha,className:"form-control",type:"date",name:"",id:""})]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(p.jsx)("textarea",{className:"form-control",type:"text",id:"",onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{descripcion:e.target.value}))},value:f.descripcion})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(p.jsxs)("button",{className:"btn bg-danger text-light",onClick:function(){return t.push("/home")},children:[Object(p.jsx)("i",{className:"fas fa-times mr-2"}),"  Cancelar"]}),Object(p.jsxs)("button",{className:"btn bg-blue text-light ml-2",onClick:function(e){w(e)},children:[Object(p.jsx)("i",{className:"fas fa-check mr-2"}),"  Agregar"]})]})]})]})}function g(){var e=Object(i.f)();Object(n.useEffect)((function(){N()}),[]);var t=Object(n.useState)(!1),c=Object(b.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),o=Object(b.a)(r,2),d=o[0],f=o[1],m=Object(n.useState)({egresosTotal:0,ingresosTotal:0,saldoTotal:0}),O=Object(b.a)(m,2),g=O[0],v=O[1],N=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),t=localStorage.getItem("currentId"),e.next=4,x.collection("caja-chica").where("idUser","==",parseInt(t)).orderBy("fecha","desc").get();case 4:c=e.sent,n=c.docs,a=n.map((function(e){return Object(l.a)({id:e.id},e.data())})),s(!1),f(a),S(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n,a,s,r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Egreso"!==t.target.value){e.next=10;break}return console.log("Egreso"),e.next=4,x.collection("caja-chica").where("idUser","==",parseInt(localStorage.getItem("currentId"))).where("tipo","==",1).get();case 4:c=e.sent,n=c.docs,a=n.map((function(e){return Object(l.a)({id:e.id},e.data())})),f(a),e.next=21;break;case 10:if("Ingreso"!==t.target.value){e.next=20;break}return console.log("Ingreso"),e.next=14,x.collection("caja-chica").where("idUser","==",parseInt(localStorage.getItem("currentId"))).where("tipo","==",2).get();case 14:s=e.sent,r=s.docs,o=r.map((function(e){return Object(l.a)({id:e.id},e.data())})),f(o),e.next=21;break;case 20:N();case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return s(!0),f([]),c=localStorage.getItem("currentId"),e.next=6,x.collection("caja-chica").where("idUser","==",parseInt(c)).where("fecha","==","".concat(t)).get();case 6:n=e.sent,a=n.docs,r=a.map((function(e){return Object(l.a)({id:e.id},e.data())})),console.log("Array fecha: ",r),f(r),s(!1),e.next=15;break;case 14:N();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/add-data/".concat(c));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(j.a.mark((function e(t,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({title:"\xbfDesea eliminar?",text:"".concat(c),icon:"warning",buttons:["Cancelar","Si, eliminar"]}).then(function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return e.next=3,x.collection("caja-chica").doc(t).delete().then((function(e){N(),C("Eliminado correctamente","success",1e3,!1)})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),S=function(e){var t=0,c=0;e.forEach((function(e){1===e.tipo&&(t+=e.cantidad),2===e.tipo&&(c+=e.cantidad)})),v({egresosTotal:t,ingresosTotal:c,saldoTotal:c-t}),console.log("Total egresos",t),console.log("Total ingresos",c)},C=function(e,t,c,n){h({title:e,icon:t,timer:c,buttons:n})};return Object(p.jsxs)("div",{className:"container",style:{paddingTop:65},children:[Object(p.jsxs)("div",{className:"mt-2 mt-3 d-flex justify-content-between",children:[Object(p.jsxs)("button",{className:"btn btn-warning",onClick:function(e){return k(1)},children:[" ",Object(p.jsx)("i",{className:"fas fa-plus mr-2"})," Nuevo egreso"]}),Object(p.jsxs)("button",{className:"btn btn-success",onClick:function(e){return k(2)},children:[" ",Object(p.jsx)("i",{className:"fas fa-plus mr-2",children:" "})," Nuevo ingreso"]})]}),Object(p.jsx)("div",{className:"row mt-4",children:Object(p.jsxs)("div",{className:"row w-100 mx-1",children:[Object(p.jsxs)("div",{className:"input-group col-5 px-1",children:[Object(p.jsx)("div",{className:"input-group-prepend",children:Object(p.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(p.jsx)("i",{className:"fas fa-calendar-alt"})})}),Object(p.jsx)("input",{onChange:function(e){return y(e.target.value)},className:"form-control",type:"date"})]}),Object(p.jsxs)("div",{className:"input-group col-7 px-1",children:[Object(p.jsx)("div",{className:"input-group-prepend",children:Object(p.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(p.jsx)("i",{className:"fas fa-search"})})}),Object(p.jsx)("input",{className:"form-control",type:"text",placeholder:"Buscar...",style:{zIndex:0}})]}),Object(p.jsx)("div",{className:"col-12 px-1 mt-2",children:Object(p.jsxs)("select",{onChange:function(e){return w(e)},className:"form-control ",id:"FormControlSelect1",children:[Object(p.jsx)("option",{children:"Todos"}),Object(p.jsx)("option",{children:"Ingreso"}),Object(p.jsx)("option",{children:"Egreso"})]})})]})}),Object(p.jsx)("div",{className:"row mt-2",style:{maxHeight:"52vh",overflow:"auto"},children:Object(p.jsxs)("table",{className:"table table-sm bg-light mx-2 text-center",style:{fontSize:13.5},children:[Object(p.jsx)("thead",{className:"",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"Cantidad"}),Object(p.jsx)("th",{scope:"col",children:"Descripci\xf3n"}),Object(p.jsx)("th",{scope:"col",children:"Tipo"}),Object(p.jsx)("th",{scope:"col",children:"Fecha"}),Object(p.jsx)("th",{scope:"col"})]})}),Object(p.jsxs)("tbody",{children:[a?Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{}),Object(p.jsx)("td",{children:Object(p.jsx)("div",{className:"spinner-border",role:"status",children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})})]}):null,d.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{children:[" Q ",e.cantidad.toFixed(2)]}),Object(p.jsx)("td",{children:e.descripcion}),Object(p.jsx)("td",{children:1===e.tipo?"Egreso":"Ingreso"}),Object(p.jsxs)("td",{children:[e.fecha," ",e.hora]}),Object(p.jsxs)("td",{children:[Object(p.jsx)("button",{onClick:function(t){return I(e.id,e.descripcion)},className:"btn btn-danger bg-red btn-sm",children:Object(p.jsx)("i",{className:"fas fa-trash"})}),"  "]})]},t)}))]})]})}),Object(p.jsx)("table",{className:"table table-bordered table-sm",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"d-flex justify-content-end",children:"+ Total ingresos"}),Object(p.jsxs)("td",{children:["Q ",g.ingresosTotal.toFixed(2)]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"d-flex justify-content-end",children:"- Total egresos"}),Object(p.jsxs)("td",{children:["Q ",g.egresosTotal.toFixed(2)]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{className:"d-flex justify-content-end",children:"Saldo"}),Object(p.jsxs)("td",{children:["Q ",g.saldoTotal.toFixed(2)]})]})]})})]})}c(30);var v=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)("toralla"),r=Object(b.a)(s,2),o=r[0],d=r[1],h=Object(n.useState)(null),f=Object(b.a)(h,2),m=f[0],O=f[1],g=Object(n.useState)([]),v=Object(b.a)(g,2),N=v[0],w=v[1],y=Object(i.f)();Object(n.useEffect)((function(){localStorage.setItem("currentId",""),k()}),[]);var k=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("users").get();case 2:t=e.sent,c=t.docs,n=c.map((function(e){return Object(l.a)({id:e.id},e.data())})),w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N.forEach((function(e){c.trim()===e.user&&o.trim()===e.pass?(y.push("/home"),localStorage.setItem("currentId",""),localStorage.setItem("currentId",e.id),window.location.reload()):O("Usuario o contrase\xf1a incorrecta.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"container  mt-5 pt-3",children:Object(p.jsx)("div",{className:"row justify-content-center align-items-center mt-5",children:Object(p.jsxs)("div",{className:"col-sm-12 col-md-4 shadow p-5 bg-light rounded-lg m-4 m-sm-0",children:[Object(p.jsxs)("form",{onSubmit:function(e){return I(e)},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("i",{className:"fas fa-user mr-2"}),"Usuario"]}),Object(p.jsx)("input",{onChange:function(e){return a(e.target.value)},value:c,className:"form-control",type:"text",placeholder:"Email..."})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("label",{children:[Object(p.jsx)("i",{className:"fas fa-key mr-2"}),"Contrase\xf1a"]}),Object(p.jsx)("input",{onChange:function(e){return d(e.target.value)},value:o,className:"form-control",type:"password",dplaceholder:"Contrase\xf1a..."})]}),Object(p.jsx)("button",{className:"btn btn-dark bg-blue btn-block mt-4",children:"Ingresar"})]}),null!=m?Object(p.jsx)("div",{className:"alert alert-danger mt-2",role:"alert",children:m}):Object(p.jsx)("span",{})]})})})})};function N(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(i.f)();Object(n.useEffect)((function(){var e=localStorage.getItem("currentId");a(e)}),[]);return Object(p.jsxs)("div",{children:[Object(p.jsx)("nav",{className:"navbar navbar-dark bg-blue mb-0 pb-0 py-3 fixed",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"navbar-brand d-flex justify-content-between w-100",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("i",{className:"fas fa-calculator mr-2"}),"AdminCuentas"]}),Object(p.jsxs)("div",{className:c?"d-flexx":"d-none",onClick:function(e){return localStorage.setItem("currentId",""),a(""),void s.push("/")},style:{cursor:"pointer",fontSize:17},children:[Object(p.jsx)("i",{className:"fas fa-sign-out text-light mr-2"}),"Salir"]})]})})}),Object(p.jsx)("div",{className:"menu"})]})}var w=function(){return Object(p.jsx)("div",{className:"fondo",children:Object(p.jsxs)(o.a,{children:[Object(p.jsx)(N,{}),Object(p.jsxs)(i.c,{children:[Object(p.jsxs)(i.a,{path:"/add-data/:id",children:[" ",Object(p.jsx)(O,{})," "]}),Object(p.jsxs)(i.a,{path:"/home",children:[" ",Object(p.jsx)(g,{})," "]}),Object(p.jsx)(i.a,{path:"/login",children:Object(p.jsx)(v,{})}),Object(p.jsx)(i.a,{path:"/",children:Object(p.jsx)(v,{})})]})]})})};c(50);r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.d5aa3b6c.chunk.js.map