(this.webpackJsonpadmincuentas=this.webpackJsonpadmincuentas||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},48:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(30),s=c.n(r),o=(c(38),c(39),c(20)),i=c(1);function l(){return Object(i.jsx)("div",{children:Object(i.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(o.b,{to:"/",className:"navbar-brand",children:"Cuentas"})})})})}var j=c(6),u=c(5),d=c.n(u),b=c(7),h=c(11),O=c(12),m=c(32),f=(c(46),c(53),c(52),m.a.initializeApp({apiKey:"AIzaSyCF-z2ZrX_tkqsmkUfHhLkEYsMuYDBTtiE",authDomain:"adminhome-36c6e.firebaseapp.com",projectId:"adminhome-36c6e",storageBucket:"adminhome-36c6e.appspot.com",messagingSenderId:"450868120054",appId:"1:450868120054:web:527d8ee64f78be64105fd7",rules:{".read":"auth != null",".write":"auth != null"}})),x=(f.auth(),f.firestore());f.storage().ref(),c(48);var p=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)("toralla"),s=Object(O.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(null),m=Object(O.a)(u,2),f=m[0],p=m[1],g=Object(n.useState)([]),v=Object(O.a)(g,2),N=v[0],w=v[1],k=Object(j.f)();Object(n.useEffect)((function(){y()}),[]);var y=function(){var e=Object(h.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("users").get();case 2:t=e.sent,c=t.docs,n=c.map((function(e){return Object(b.a)({id:e.id},e.data())})),w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N.forEach((function(e){c.trim()===e.user&&o.trim()===e.pass?k.push("/home"):p("Usuario o contrase\xf1a incorrecta.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)("div",{className:"row justify-content-center align-items-center mt-5",children:Object(i.jsxs)("div",{className:"col-sm-12 col-md-4 shadow p-5 bg-light rounded-lg m-4 m-sm-0",children:[Object(i.jsxs)("form",{onSubmit:function(e){return C(e)},children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("i",{className:"fas fa-user mr-2"}),"Usuario"]}),Object(i.jsx)("input",{onChange:function(e){return a(e.target.value)},value:c,className:"form-control",type:"text",placeholder:"Email..."})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("i",{className:"fas fa-key mr-2"}),"Contrase\xf1a"]}),Object(i.jsx)("input",{onChange:function(e){return l(e.target.value)},value:o,className:"form-control",type:"password",dplaceholder:"Contrase\xf1a..."})]}),Object(i.jsx)("button",{className:"btn btn-dark btn-block mt-4",children:"Ingresar"})]}),null!=f?Object(i.jsx)("div",{className:"alert alert-danger mt-2",role:"alert",children:f}):Object(i.jsx)("span",{})]})})})})},g=c(22),v=c.n(g);function N(e){var t=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},c={cantidad:0,fecha:"",hora:t(),inquilino:""},a={cantidad:0,fecha:"",hora:t(),descripcion:""},r=Object(n.useState)([]),s=Object(O.a)(r,2),o=s[0],l=s[1],j=Object(n.useState)(c),u=Object(O.a)(j,2),m=u[0],f=u[1],p=Object(n.useState)(a),g=Object(O.a)(p,2),N=g[0],w=g[1];Object(n.useEffect)((function(){k()}),[]);var k=function(){var e=Object(h.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Data de inquilinos"),e.next=3,x.collection("inquilinos").get();case 3:t=e.sent,c=t.docs,n=c.map((function(e){return Object(b.a)({id:e.id},e.data())})),l(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var t=Object(h.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,x.collection("ingresos").add(m).then((function(t){e.calculo(),v()({title:"Agregado correctamente",icon:"success",timer:1e3}),f(c)})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(h.a)(d.a.mark((function t(c){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.next=3,x.collection("egresos").add(N).then(function(){var t=Object(h.a)(d.a.mark((function t(c){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.calculo(),v()({title:"Agregado correctamente",icon:"success",timer:1e3}),w(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"w-100",children:[Object(i.jsxs)("form",{onSubmit:function(e){return C(e)},className:"w-100 bg-warning p-2",children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col p-0",children:Object(i.jsxs)("div",{className:"form-group ml-3",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("strong",{children:" Egreso:"})," "]}),Object(i.jsx)("input",{className:"form-control",type:"number",onChange:function(e){return w(Object(b.a)(Object(b.a)({},N),{},{cantidad:Number(e.target.value)}))},value:N.cantidad})]})}),Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{htmlFor:"",children:[" ",Object(i.jsx)("strong",{children:"Fecha:"})," "]}),Object(i.jsx)("input",{className:"form-control",type:"date",name:"",id:"",onChange:function(e){return w(Object(b.a)(Object(b.a)({},N),{},{fecha:e.target.value}))},value:N.fecha})]})})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("strong",{children:" Descripcion:"})," "]}),Object(i.jsx)("input",{className:"form-control",type:"text",id:"",onChange:function(e){return w(Object(b.a)(Object(b.a)({},N),{},{descripcion:e.target.value}))},value:N.descripcion})]}),Object(i.jsx)("button",{className:" w-100 btn btn-success d-block",onClick:function(t){e.agregarData(!1)},children:"Agregar"})]}),Object(i.jsxs)("form",{onSubmit:function(e){return y(e)},className:"w-100 bg-light mt-3 p-2 border",children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col p-0",children:Object(i.jsxs)("div",{className:"form-group ml-3",children:[Object(i.jsxs)("label",{children:[Object(i.jsx)("strong",{children:" Ingreso:"})," "]}),Object(i.jsx)("input",{onChange:function(e){return f(Object(b.a)(Object(b.a)({},m),{},{cantidad:Number(e.target.value)}))},value:m.cantidad,className:"form-control",min:"0",type:"number",id:""})]})}),Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsxs)("label",{htmlFor:"",children:[" ",Object(i.jsx)("strong",{children:"Fecha:"})]}),Object(i.jsx)("input",{onChange:function(e){return f(Object(b.a)(Object(b.a)({},m),{},{fecha:e.target.value}))},value:m.fecha,className:"form-control",type:"date",name:"",id:""})]})})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"FormControlSelect1",children:Object(i.jsx)("strong",{children:"Inquilino:"})}),Object(i.jsxs)("select",{className:"form-control",id:"FormControlSelect1",children:[Object(i.jsx)("option",{children:" Seleccione un inquilino..."}),o.map((function(e,t){return Object(i.jsxs)("option",{onClick:function(e){return f(Object(b.a)(Object(b.a)({},m),{},{inquilino:e.target.value}))},children:[" ",e.name]},t)}))]})]}),Object(i.jsx)("button",{onClick:function(t){e.agregarData(!0)},className:" w-100 btn btn-success d-block",children:"Agregar"})]})]})}function w(e){Object(n.useEffect)((function(){e.getDataE()}),[]);var t=function(){var t=Object(h.a)(d.a.mark((function t(c){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("delete",c),t.next=3,x.collection("egresos").doc(c).delete().then((function(t){e.getDataE(),v()({title:"Eliminado correctamente",icon:"success",timer:1e3})})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"",children:[Object(i.jsx)("h5",{className:"text-center w-100 d-block py-1 bg-warning text-light",children:"Egresos"}),Object(i.jsxs)("table",{className:"table table-hover table-striped",children:[Object(i.jsx)("thead",{className:"table-success",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"#"}),Object(i.jsx)("th",{scope:"col",children:"Cantidad"}),Object(i.jsx)("th",{scope:"col",children:"Descripcion"}),Object(i.jsx)("th",{scope:"col",children:"Fecha"}),Object(i.jsx)("th",{scope:"col",children:"Hora"}),Object(i.jsx)("th",{scope:"col",children:"Eliminar"})]})}),Object(i.jsx)("tbody",{children:e.listEgresos2.map((function(e,c){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:c+1}),Object(i.jsxs)("td",{children:[" Q ",e.cantidad]}),Object(i.jsx)("td",{children:e.descripcion}),Object(i.jsx)("td",{children:e.fecha}),Object(i.jsx)("td",{children:e.hora}),Object(i.jsxs)("td",{children:[Object(i.jsx)("button",{onClick:function(c){return t(e.id)},className:"btn btn-danger",children:Object(i.jsx)("i",{className:"fas fa-trash"})}),"  "]})]},c)}))})]})]})}function k(e){return Object(n.useEffect)((function(){e.getData()}),[]),Object(i.jsxs)("div",{className:"",children:[Object(i.jsx)("h5",{className:"text-center w-100 d-block py-1 bg-success text-light",children:"Ingresos"}),Object(i.jsxs)("table",{className:"table table-hover table-striped",children:[Object(i.jsx)("thead",{className:"table-success",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:"#"}),Object(i.jsx)("th",{scope:"col",children:"Cantidad"}),Object(i.jsx)("th",{scope:"col",children:"Inquilino"}),Object(i.jsx)("th",{scope:"col",children:"Fecha"}),Object(i.jsx)("th",{scope:"col",children:"Hora"})]})}),Object(i.jsx)("tbody",{children:e.listIngresos2.map((function(e,t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:t+1}),Object(i.jsxs)("td",{children:[" Q ",e.cantidad]}),Object(i.jsx)("td",{children:e.inquilino}),Object(i.jsx)("td",{children:e.fecha}),Object(i.jsx)("td",{children:e.hora})]},t)}))})]})]})}function y(){Object(n.useEffect)((function(){E()}),[]);var e=Object(n.useState)(!1),t=Object(O.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(O.a)(r,2),o=s[0],l=s[1],j=Object(n.useState)([]),u=Object(O.a)(j,2),m=u[0],f=u[1],p=Object(n.useState)(0),g=Object(O.a)(p,2),v=g[0],y=g[1],C=function(e){var t=e.split("-");switch(t[1]){case"01":t[1]="Ene";break;case"02":t[1]="Feb";break;case"03":t[1]="Mar";break;case"04":t[1]="Abr";break;case"05":t[1]="May";break;case"06":t[1]="Jun";break;case"07":t[1]="Jul";break;case"08":t[1]="Ago";break;case"09":t[1]="Sep";break;case"10":t[1]="Oct";break;case"11":t[1]="Nov";break;case"12":t[1]="Dic"}return t[2]+"-"+t[1]+"-"+t[0]},E=function(){var e=Object(h.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection("totalCaja").get();case 2:t=e.sent,c=t.docs,n=c.map((function(e){return Object(b.a)({id:e.id},e.data())})),y(n[1].total-n[0].total),console.log("Obteniendo data de calculo",v);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=0,D=function(){var e=Object(h.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("obteniendo data Ingresos"),e.next=3,x.collection("ingresos").orderBy("fecha","desc").get();case 3:return t=e.sent,c=t.docs,(n=c.map((function(e){return Object(b.a)({id:e.id},e.data())}))).forEach((function(e){S+=e.cantidad,e.fecha=C(e.fecha)})),e.next=9,x.collection("totalCaja").doc("total_ingresos").set({total:S});case 9:l(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Obteniendo data Egresos"),e.next=3,x.collection("egresos").orderBy("fecha","desc").get();case 3:return t=e.sent,c=t.docs,(n=c.map((function(e){return Object(b.a)({id:e.id},e.data())}))).forEach((function(e){S+=e.cantidad,e.fecha=C(e.fecha)})),e.next=9,x.collection("totalCaja").doc("total_egresos").set({total:S});case 9:f(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"row mt-4",children:[Object(i.jsx)("div",{className:"col-12 col-sm-4 mb-5 mb-sm-0 order-2 order-md-1",children:Object(i.jsx)(N,{calculo:E,agregarData:function(e){!0===e?(D(),E()):(I(),E())}})}),Object(i.jsxs)("div",{className:"col-12 col-sm-8 mt-4 mt-md-0 order-1 order-md-2",children:[Object(i.jsxs)("select",{onChange:function(e){return function(e){"Egreso"===e.target.value?a(!1):"Ingreso"===e.target.value&&a(!0)}(e)},className:"form-control bg-dark text-light",id:"FormControlSelect1",children:[Object(i.jsx)("option",{children:" Seleccione una tabla..."}),Object(i.jsx)("option",{children:"Ingreso"}),Object(i.jsx)("option",{children:"Egreso"})]}),Object(i.jsx)("div",{className:"mt-2 bg-light customTable",children:c?Object(i.jsx)(k,{getData:D,listIngresos2:o}):Object(i.jsx)(w,{getDataE:I,calculo:E,listEgresos2:m})}),Object(i.jsxs)("div",{className:"bg-light d-flex justify-content-end pr-3 mt-2 mb-5 mb-md-0 w-100 h5",children:[Object(i.jsx)("strong",{className:"pr-2",children:" Caja: "})," Q ",v,".00"]})]})]})})}var C=function(){return Object(i.jsx)("div",{className:"fondo",children:Object(i.jsxs)(o.a,{children:[Object(i.jsx)(l,{}),Object(i.jsxs)(j.c,{children:[Object(i.jsxs)(j.a,{path:"/home",children:[" ",Object(i.jsx)(y,{})," "]}),Object(i.jsx)(j.a,{path:"/",children:Object(i.jsx)(p,{})})]})]})})};c(50);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(C,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.f6a1c9f3.chunk.js.map