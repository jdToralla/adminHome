(this.webpackJsonpadmincuentas=this.webpackJsonpadmincuentas||[]).push([[0],{37:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(25),r=c.n(s),i=(c(46),c(28)),o=c(9),l=(c(47),c(8)),d=c(5),j=c.n(d),u=c(13),b=c(15),h=c(26),f=c(38),m=(c(50),c(61),c(60),f.a.initializeApp({apiKey:"AIzaSyCF-z2ZrX_tkqsmkUfHhLkEYsMuYDBTtiE",authDomain:"adminhome-36c6e.firebaseapp.com",projectId:"adminhome-36c6e",storageBucket:"adminhome-36c6e.appspot.com",messagingSenderId:"450868120054",appId:"1:450868120054:web:527d8ee64f78be64105fd7",rules:{".read":"auth != null",".write":"auth != null"}})),p=(m.auth(),m.firestore()),x=(m.storage().ref(),c(2));function O(e){var t=Object(o.f)(),c=Object(o.g)().id,a=function(){var e;return(e=new Date).getHours()+":"+e.getUTCMinutes()+":"+e.getSeconds()},s={cantidad:"",fecha:"",hora:a(),descripcion:"",idUser:parseInt(localStorage.getItem("currentId")),tipo:2},r={cantidad:"",fecha:"",hora:a(),descripcion:"",idUser:parseInt(localStorage.getItem("currentId")),tipo:1},i=Object(n.useState)(s),d=Object(b.a)(i,2),f=d[0],m=d[1],O=Object(n.useState)(r),g=Object(b.a)(O,2),v=g[0],N=g[1];Object(n.useEffect)((function(){}),[]);var w=function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!(f.fecha.length>0&&0!==f.cantidad.length&&f.descripcion.length>0)){e.next=7;break}return f.cantidad=parseFloat(f.cantidad),e.next=5,p.collection("caja-chica").add(f).then((function(e){console.log("Data ingreso",f),k("Agregado correctamente","success",1e3,!1),t.push("/home"),m(s)})).catch((function(e){return console.log(e)}));case 5:e.next=8;break;case 7:k("Agregue todos los campos correspondientes","error",1200,!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!(v.fecha.length>0&&0!==v.cantidad&&v.descripcion.length>0)){e.next=7;break}return v.cantidad=parseFloat(v.cantidad),e.next=5,p.collection("caja-chica").add(v).then(function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Data ingreso",v.cantidad2),k("Agregado correctamente","success",1e3,!1),t.push("/home"),N(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 5:e.next=8;break;case 7:k("Agregue todos los campos correspondientes","error",1200,!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t,c,n){h({title:e,icon:t,timer:c,buttons:n})};return Object(x.jsxs)("div",{className:"w-100 px-3",style:{paddingTop:115},children:[Object(x.jsxs)("form",{onSubmit:function(e){return y(e)},className:"w-100 bg-yellow p-2",style:{display:"1"===c?"block":"none"},children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col p-0",children:Object(x.jsxs)("div",{className:"form-group ml-3",children:[Object(x.jsxs)("label",{children:[Object(x.jsxs)("strong",{children:[" ",Object(x.jsx)("i",{className:"fas fa-money-bill-alt"})," Egreso:"]})," "]}),Object(x.jsx)("input",{className:"form-control",type:"text",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{cantidad:e.target.value}))},value:v.cantidad})]})}),Object(x.jsx)("div",{className:"col",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[" ",Object(x.jsxs)("strong",{children:[Object(x.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})," "]}),Object(x.jsx)("input",{className:"form-control",type:"date",name:"",id:"",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{fecha:e.target.value}))},value:v.fecha})]})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(x.jsx)("textarea",{className:"form-control",type:"text",id:"",onChange:function(e){return N(Object(l.a)(Object(l.a)({},v),{},{descripcion:e.target.value}))},value:v.descripcion})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsxs)("button",{className:"btn bg-danger text-light",onClick:function(){return t.push("/home")},children:[Object(x.jsx)("i",{className:"fas fa-times mr-2"}),"  Cancelar"]}),Object(x.jsxs)("button",{className:"btn bg-blue text-light ml-2",onClick:function(e){y(e)},children:[Object(x.jsx)("i",{className:"fas fa-check mr-2"}),"  Agregar"]})]})]}),Object(x.jsxs)("form",{onSubmit:function(e){return w(e)},className:"w-100 bg-green p-2 border",style:{display:"2"===c?"block":"none"},children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col p-0",children:Object(x.jsxs)("div",{className:"form-group ml-3",children:[Object(x.jsx)("label",{children:Object(x.jsxs)("strong",{children:[" ",Object(x.jsx)("i",{className:"fas fa-money-bill-alt"})," Ingreso:"]})}),Object(x.jsx)("input",{onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{cantidad:e.target.value}))},value:f.cantidad,className:"form-control",type:"text",id:""})]})}),Object(x.jsx)("div",{className:"col",children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[" ",Object(x.jsxs)("strong",{children:[Object(x.jsx)("i",{className:"fas fa-calendar-day"})," Fecha:"]})]}),Object(x.jsx)("input",{onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{fecha:e.target.value}))},value:f.fecha,className:"form-control",type:"date",name:"",id:""})]})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("strong",{children:" Descripci\xf3n:"})," "]}),Object(x.jsx)("textarea",{className:"form-control",type:"text",id:"",onChange:function(e){return m(Object(l.a)(Object(l.a)({},f),{},{descripcion:e.target.value}))},value:f.descripcion})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsxs)("button",{className:"btn bg-danger text-light",onClick:function(){return t.push("/home")},children:[Object(x.jsx)("i",{className:"fas fa-times mr-2"}),"  Cancelar"]}),Object(x.jsxs)("button",{className:"btn bg-blue text-light ml-2",onClick:function(e){w(e)},children:[Object(x.jsx)("i",{className:"fas fa-check mr-2"}),"  Agregar"]})]})]})]})}var g=c(64),v=c(65),N={egresosTotal:0,ingresosTotal:0,saldoTotal:0},w={id:"",cantidad:"",descripcion:"",newDescripcion:"",tipo:"",fecha:""};function y(){var e=Object(o.f)();Object(n.useEffect)((function(){z()}),[]);var t=Object(n.useState)(!1),c=Object(b.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)([]),i=Object(b.a)(r,2),d=i[0],f=i[1],m=Object(n.useState)(N),O=Object(b.a)(m,2),y=O[0],k=O[1],S=Object(n.useState)(!1),I=Object(b.a)(S,2),C=I[0],T=I[1],D=function(){return T(!1)},E=Object(n.useState)(w),F=Object(b.a)(E,2),A=F[0],U=F[1],z=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),t=localStorage.getItem("currentId"),e.next=4,p.collection("caja-chica").where("idUser","==",parseInt(t)).orderBy("fecha","desc").get();case 4:c=e.sent,n=c.docs,(a=n.map((function(e){return Object(l.a)({id:e.id},e.data())}))).map((function(e){return e.fecha=B(e.fecha)})),s(!1),f(a),L(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){var t=e.split("-");return"".concat(t[2],"/").concat(t[1],"/").concat(t[0])},H=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n,a,r,i,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f([]),s(!0),"Egreso"!==t.target.value){e.next=12;break}return e.next=5,p.collection("caja-chica").where("idUser","==",parseInt(localStorage.getItem("currentId"))).where("tipo","==",1).get();case 5:c=e.sent,n=c.docs,a=n.map((function(e){return Object(l.a)({id:e.id},e.data())})),f(a),s(!1),e.next=23;break;case 12:if("Ingreso"!==t.target.value){e.next=22;break}return e.next=15,p.collection("caja-chica").where("idUser","==",parseInt(localStorage.getItem("currentId"))).where("tipo","==",2).get();case 15:r=e.sent,i=r.docs,o=i.map((function(e){return Object(l.a)({id:e.id},e.data())})),f(o),s(!1),e.next=23;break;case 22:z();case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(j.a.mark((function e(t){var c,n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return s(!0),f([]),c=localStorage.getItem("currentId"),e.next=6,p.collection("caja-chica").where("idUser","==",parseInt(c)).where("fecha","==","".concat(t)).get();case 6:n=e.sent,a=n.docs,r=a.map((function(e){return Object(l.a)({id:e.id},e.data())})),console.log("Array fecha: ",r),f(r),s(!1),e.next=15;break;case 14:z();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var t=Object(u.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/add-data/".concat(c));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(j.a.mark((function e(t,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({title:"\xbfDesea eliminar?",text:"".concat(c),icon:"warning",buttons:["Cancelar","Si, eliminar"]}).then(function(){var e=Object(u.a)(j.a.mark((function e(c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return e.next=3,p.collection("caja-chica").doc(t).delete().then((function(e){z(),Y("Eliminado correctamente","success",1e3,!1)})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),L=function(e){var t=0,c=0;e.forEach((function(e){1===e.tipo&&(t+=e.cantidad),2===e.tipo&&(c+=e.cantidad)})),k({egresosTotal:t,ingresosTotal:c,saldoTotal:c-t})},Y=function(e,t,c,n){h({title:e,icon:t,timer:c,buttons:n})};return Object(x.jsxs)("div",{className:"container",style:{paddingTop:85},children:[Object(x.jsxs)("div",{className:"mt-2 mt-3 d-flex justify-content-between",children:[Object(x.jsxs)("button",{className:"btn btn-success btn-sm",onClick:function(e){return Q(2)},children:[" ",Object(x.jsx)("i",{className:"fas fa-plus mr-2",children:" "})," Nuevo ingreso"]}),Object(x.jsxs)("button",{className:"btn btn-warning btn-sm",onClick:function(e){return Q(1)},children:[" ",Object(x.jsx)("i",{className:"fas fa-plus mr-2"})," Nuevo egreso"]})]}),Object(x.jsx)("div",{className:"row mt-4",children:Object(x.jsxs)("div",{className:"row w-100 mx-1",children:[Object(x.jsxs)("div",{className:"input-group col-12 px-1",children:[Object(x.jsx)("div",{className:"input-group-prepend",children:Object(x.jsx)("span",{className:"input-group-text",id:"basic-addon1",children:Object(x.jsx)("i",{className:"fas fa-calendar-alt"})})}),Object(x.jsx)("input",{onChange:function(e){return M(e.target.value)},className:"form-control",type:"date",placeholder:"dd/mm/aaaa",style:{fontSize:10,height:"100%"}})]}),Object(x.jsx)("div",{className:"col-12 px-1 mt-2",children:Object(x.jsxs)("select",{defaultValue:0,onChange:function(e){return H(e)},className:"form-control",id:"FormControlSelect1",style:{fontSize:10,height:"100%"},children:[Object(x.jsx)("option",{selected:!0,disabled:!0,value:0,children:"Seleccione una opcion."}),Object(x.jsx)("option",{children:"Todos"}),Object(x.jsx)("option",{children:"Ingreso"}),Object(x.jsx)("option",{children:"Egreso"})]})})]})}),Object(x.jsx)("div",{className:"row mt-2",style:{maxHeight:"47vh",overflow:"auto"},children:Object(x.jsxs)("table",{className:"table table-sm bg-light mx-2 text-center",style:{fontSize:13.5},children:[Object(x.jsx)("thead",{className:"",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",children:"Cantidad"}),Object(x.jsx)("th",{scope:"col",children:"Descripci\xf3n"}),Object(x.jsx)("th",{scope:"col",children:"Tipo"}),Object(x.jsx)("th",{scope:"col",children:"Fecha"}),Object(x.jsx)("th",{scope:"col"}),Object(x.jsx)("th",{scope:"col"})]})}),Object(x.jsxs)("tbody",{children:[a?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("td",{children:Object(x.jsx)("div",{className:"spinner-border",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})})})]}):null,d.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.cantidad.toFixed(2)}),Object(x.jsx)("td",{children:e.descripcion}),Object(x.jsxs)("td",{children:[" ",Object(x.jsx)("span",{className:"".concat(1===e.tipo?"bg-warning":"bg-success"," px-1"),style:{borderRadius:5},children:1===e.tipo?"Egreso":"Ingreso"})]}),Object(x.jsxs)("td",{children:[e.fecha," ",e.hora]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:function(t){return J(e.id,e.descripcion)},className:"btn btn-danger btn-sm",children:Object(x.jsx)("i",{className:"fas fa-trash"})}),"  "]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:function(t){return function(e,t){console.log("Abrir",e,t),U(t),T(!0)}(e.id,e)},className:"btn btn-warning btn-sm",children:Object(x.jsx)("i",{className:"fas fa-pencil"})}),"  "]})]},t)}))]})]})}),Object(x.jsxs)(g.a,{show:C,onHide:D,centered:!0,children:[Object(x.jsx)(g.a.Header,{closeButton:!0,children:Object(x.jsx)(g.a.Title,{children:"Editar registro"})}),Object(x.jsx)(g.a.Body,{children:Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{htmlFor:"description",children:[Object(x.jsx)("b",{children:"Descripci\xf3n:"})," ",A.descripcion]}),Object(x.jsx)("textarea",{placeholder:"Escriba la nueva descripcion",onChange:function(e){return U(Object(l.a)(Object(l.a)({},A),{},{newDescripcion:e.target.value}))},type:"email",className:"form-control mt-2",id:"description","aria-describedby":"emailHelp"})]})}),Object(x.jsxs)(g.a.Footer,{children:[Object(x.jsxs)(v.a,{variant:"secondary",onClick:D,children:[Object(x.jsx)("i",{className:"fas fa-times mr-2"}),"Cancelar"]}),Object(x.jsxs)(v.a,{variant:"primary",onClick:function(){h({title:"\xbfDesea editar el registro?",icon:"info",buttons:["Cancelar","Si, editar"]}).then(function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return console.log("Data edit: ",A),T(!1),e.next=5,p.collection("caja-chica").doc(A.id).update({descripcion:A.newDescripcion}).catch((function(e){return console.log(e)}));case 5:z();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[Object(x.jsx)("i",{className:"fas fa-check mr-2"}),"Guardar cambios"]})]})]}),Object(x.jsx)("table",{className:"table table-sm mx-2",style:{fontSize:13.5},children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"d-flex justify-content-end",children:"+ Total ingresos"}),Object(x.jsxs)("td",{children:["Q ",y.ingresosTotal.toFixed(2)]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"d-flex justify-content-end",children:"- Total egresos"}),Object(x.jsxs)("td",{children:["Q ",y.egresosTotal.toFixed(2)]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"d-flex justify-content-end",children:"Saldo"}),Object(x.jsxs)("td",{children:["Q ",y.saldoTotal.toFixed(2)]})]})]})})]})}c(37);var k=function(){var e=Object(n.useState)("norma77"),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)("toralla12"),r=Object(b.a)(s,2),i=r[0],d=r[1],h=Object(n.useState)(null),f=Object(b.a)(h,2),m=f[0],O=f[1],g=Object(n.useState)([]),v=Object(b.a)(g,2),N=v[0],w=v[1],y=Object(o.f)();Object(n.useEffect)((function(){localStorage.setItem("currentId",""),k()}),[]);var k=function(){var e=Object(u.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.collection("users").get();case 2:t=e.sent,c=t.docs,n=c.map((function(e){return Object(l.a)({id:e.id},e.data())})),w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),N.forEach((function(e){c.trim()===e.user&&i.trim()===e.pass?(y.push("/home"),localStorage.setItem("currentId",""),localStorage.setItem("currentId",e.id),window.location.reload()):O("Usuario o contrase\xf1a incorrecta.")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("div",{className:"row justify-content-center align-items-center",style:{paddingTop:120},children:Object(x.jsxs)("div",{className:"col-sm-12 col-md-4 shadow p-5 bg-light rounded-lg m-4 m-sm-0",children:[Object(x.jsxs)("form",{onSubmit:function(e){return S(e)},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("i",{className:"fas fa-user mr-2"}),"Usuario"]}),Object(x.jsx)("input",{onChange:function(e){return a(e.target.value)},value:c,className:"form-control",type:"text",placeholder:"Usuario..."})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("label",{children:[Object(x.jsx)("i",{className:"fas fa-key mr-2"}),"Contrase\xf1a"]}),Object(x.jsx)("input",{onChange:function(e){return d(e.target.value)},value:i,className:"form-control",type:"password",dplaceholder:"Contrase\xf1a..."})]}),Object(x.jsx)("button",{className:"btn btn-dark bg-blue btn-block mt-4",children:"Ingresar"})]}),null!=m?Object(x.jsx)("div",{className:"alert alert-danger mt-2",role:"alert",children:m}):Object(x.jsx)("span",{})]})})})})};function S(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(o.f)();Object(n.useEffect)((function(){var e=localStorage.getItem("currentId");a(e)}),[]);return Object(x.jsx)("div",{children:Object(x.jsx)("nav",{className:"navbar navbar-dark bg-blue mb-0 pb-0 py-3 fixed",children:Object(x.jsx)("div",{className:"container",style:{paddingTop:20},children:Object(x.jsxs)("div",{className:"navbar-brand d-flex justify-content-between w-100",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("i",{className:"fas fa-calculator mr-2"}),"AdminCuentas"]}),Object(x.jsxs)("div",{className:c?"d-flexx":"d-none",onClick:function(e){h({title:"\xbfDesea salir?",icon:"warning",buttons:["Cancelar","Si, salir"]}).then(function(){var e=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(localStorage.setItem("currentId",""),s.push("/"),a(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},style:{cursor:"pointer",fontSize:17},children:[Object(x.jsx)("i",{className:"fas fa-sign-out text-light mr-2"}),"Salir"]})]})})})})}var I=function(){return Object(x.jsx)("div",{className:"fondo",children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(S,{}),Object(x.jsxs)(o.c,{children:[Object(x.jsxs)(o.a,{path:"/add-data/:id",children:[" ",Object(x.jsx)(O,{})," "]}),Object(x.jsxs)(o.a,{path:"/home",children:[" ",Object(x.jsx)(y,{})," "]}),Object(x.jsx)(o.a,{path:"/login",children:Object(x.jsx)(k,{})}),Object(x.jsx)(o.a,{path:"/",children:Object(x.jsx)(k,{})})]})]})})};c(58);r.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(I,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.5b5fa411.chunk.js.map